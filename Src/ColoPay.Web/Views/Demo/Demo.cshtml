@{
    Layout = null;
}
@using ColoPay.Web.Controllers
@model ColoPay.Web.Models.DemoProductSearch
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <link href="@Url.Content("~/Content/DemoContent/base.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/DemoContent/plist20120412.css")" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="../../Content/DemoContent/maticsoft.jquery.min.js" type="text/javascript"></script>
   @* <script src="../../Content/DemoContent/base-2011.js" type="text/javascript"></script>*@
    <script type="text/javascript">
        $(document).ready(function () {
            //compare();
            var para = ManageParameter(GetRequest());
            $("#select>dl").each(function (index) {
                $("#select>dl").eq(index).find('a').each(function (j) {
                    var idValue = $("#select>dl").eq(index).find('a').eq(j).attr('id');
                    var _hrefValue = "";
                    switch (index) {
                        case 0:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a1 = idValue;
                            if (idValue == para.a1) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + newPara.a1 + "&a2=" + para.a2 + "&a3=" + para.a3 + "&a4=" + para.a4 + "&a5=" + para.a5 + "&a6=" + para.a6 + "&a7=" + para.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        case 1:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a2 = idValue;
                            if (idValue == para.a2) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + para.a1 + "&a2=" + newPara.a2 + "&a3=" + para.a3 + "&a4=" + para.a4 + "&a5=" + para.a5 + "&a6=" + para.a6 + "&a7=" + para.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        case 2:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a3 = idValue;
                            if (idValue == para.a3) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + para.a1 + "&a2=" + para.a2 + "&a3=" + newPara.a3 + "&a4=" + para.a4 + "&a5=" + para.a5 + "&a6=" + para.a6 + "&a7=" + para.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        case 3:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a4 = idValue;
                            if (idValue == para.a4) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + para.a1 + "&a2=" + para.a2 + "&a3=" + para.a3 + "&a4=" + newPara.a4 + "&a5=" + para.a5 + "&a6=" + para.a6 + "&a7=" + para.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        case 4:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a5 = idValue;
                            if (idValue == para.a5) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + para.a1 + "&a2=" + para.a2 + "&a3=" + para.a3 + "&a4=" + para.a4 + "&a5=" + newPara.a5 + "&a6=" + para.a6 + "&a7=" + para.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        case 5:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a6 = idValue;
                            if (idValue == para.a6) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + para.a1 + "&a2=" + para.a2 + "&a3=" + para.a3 + "&a4=" + para.a4 + "&a5=" + para.a5 + "&a6=" + newPara.a6 + "&a7=" + para.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        case 6:
                            var newPara = ManageParameter(GetRequest());
                            newPara.a7 = idValue;
                            if (idValue == para.a7) {
                                $("#select>dl").eq(index).find('a').eq(j).attr('class', 'curr');
                            }
                            var newUrl = "";
                            newUrl = "?id=" + para.id + "&a1=" + para.a1 + "&a2=" + para.a2 + "&a3=" + para.a3 + "&a4=" + para.a4 + "&a5=" + para.a5 + "&a6=" + para.a6 + "&a7=" + newPara.a7;
                            $("#select>dl").eq(index).find('a').eq(j).attr('href', newUrl);
                            break;
                        default:

                    }
                });
            });
        });

        function ManageParameter(v) {
            if (!v.a1) {
                v.a1 = 0;
            }
            if (!v.a2) {
                v.a2 = 0;
            }
            if (!v.a3) {
                v.a3 = 0;
            }
            if (!v.a4) {
                v.a4 = 0;
            }
            if (!v.a5) {
                v.a5 = 0;
            }
            if (!v.a6) {
                v.a6 = 0;
            }
            if (!v.a7) {
                v.a7 = 0;
            }
            if (!v.id) {
                v.id = 0;
            }
            return v;
        }
        function GetRequest() {
            var url = location.search; //获取url中"?"符后的字串  
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        }  
    </script>
</head>
<body class="root61">
    <div class="w main">
        <div class="right-extra">
            <div id="select" class="m" clstag="thirdtype|keycount|thirdtype|select">
                <div class="mt">
                    <strong>商品筛选</strong><div class="extra">
                        <a href="javascript:;">重置筛选条件</a></div>
                </div>
                @{
                    if (ViewBag.IsHaveBrands)
                    {
                    <dl class="fore" id="select-brand">
                        <dt>品牌：</dt>
                        <dd>
                            <div class="content">
                                <div rel="0">
                                    <a id="0">不限</a></div>
                                @foreach (var item in ViewBag.BrandList)
                                {
                                    <div rel="3">
                                        <a id="@item.BrandId" >@item.BrandName</a></div>
                                }
                            </div>
                        </dd>
                    </dl>
                    }


                    if (ViewBag.IsHaveAttr)
                    {
                        foreach (var item in ViewBag.AttributeList)
                        {
                    <dl>
                        <dt>@item.AttributeName：</dt>
                        <dd>
                            <div rel="0">
                                <a id="0">不限</a></div>
                            @foreach (var itemValue in ViewBag.AttributeValueList)
                            {
                                if (@itemValue.AttributeId == @item.AttributeId)
                                {
                                <div rel="0">
                                    <a id="@itemValue.ValueId" >@itemValue.ValueStr</a>
                                </div> 
                                }
                            }
                        </dd>
                    </dl>
                        }
                    }
                    
                }
            </div>
            <!--select end -->
            <div id="advanced">
                <div>
                    <a href="javascript:;">高级搜索</a><b></b></div>
            </div>
            <div id="filter" clstag="thirdtype|keycount|thirdtype|filter">
                <div class="fore1">
                    <dl class="order">
                        <dt>排序：</dt><dd class="curr"><a href="javascript:;">销量</a><b></b></dd><dd><b></b><a href="javascript:;"
                            rel="nofollow">价格</a><b></b></dd><dd><a href="javascript:;" rel="nofollow">评论数</a><b></b></dd><dd><a
                                href="javascript:;" rel="nofollow">上架时间</a><b></b></dd></dl>
                    <div class="pagin pagin-m">
                        <span class="text">1/24</span><span class="prev-disabled">上一页<b></b></span><a href="javascript:;"
                            class="next">下一页<b></b></a></div>
                    <div class="total">
                        <span>共<strong>844</strong>个商品</span></div>
                    <span class="clr"></span>
                </div>
            </div>
            <div class="m" id="plist" clstag="thirdtype|keycount|thirdtype|plist">
                <ul class="list-h">
                @{
                    if (ViewBag.IsHaveProduct)
                    { 
                        foreach (var item in ViewBag.ProductList)
                        {
                               <li >
                                <div class="p-img">
                                    <a target="_blank" href="javascript:;">
                                        <img  src="http://localhost:8050/@item.ThumbnailUrl1"  width="160" height="160" alt="@item.ProductName"></a>
                                    <div class="pi6">
                                    </div>
                                </div>
                                <div class="p-name">
                                    <a target="_blank" href="http://www.360buy.com/product/633998.html">@item.ProductName<font style="color: #ff0000" class="adwords" name="633998"></font></a>
                                </div>
                                <div class="p-price">
                                    <img onerror="this.src='http://www.360buy.com/images/no2.gif';" src="./笔记本 【行情 价格 评价 正品行货】_files/gp633998,1.png">
                                </div>
                                <div class="extra">
                                    <span class="evaluate"><a target="_blank" href="http://club.360buy.com/review/633998-1-1.html">已有2469人评价</a> </span>
                                    <span class="reputation">(90%好评)</span>
                                    @*<span id="p633998"><a class="pt1" title="本商品正在降价销售中">直降</a></span>*@
                                </div>
                                <div class="btns">
                                    <a onclick="log(1,7,633998)" href="http://gate.360buy.com/InitCart.aspx?pid=633998&pcount=1&ptype=1" target="_blank" class="btn-buy">购买</a>
                                    <input id="coll633998" type="button" class="btn-coll" value="关注" onclick="feed_publish_collect(2,633998);">
                                    <input type="button" class="btn-comp" value="对比" onclick="addToCompare(this,@item.ProductId,'@item.ProductName')"></div>
                            </li>
                        }
                    }
                    }
                    <script type="text/javascript">
                        var jdwsment = { "skuids": "633998,566861,633997,635255,560945,581172,643856,642249,670058,672040,643776,557916,645066,654983,622338,632257,588437,560938,560954,672047,672161,655535,617629,583051,512866,673122,536307,579859,633728,587861,664754,610997,563881,614572,574371,644110", "key": "5A50665AAE3DF22642ACADC748DFAE49C4AC547A" };</script>
                    <!-- <cache>hits</cache> -->
                </ul>
            </div>
            <!--plist end-->
            @*<div class="m clearfix">
                <div class="pagin fr">
                    <span class="prev-disabled">上一页<b></b></span><a href="javascript:;"
                        class="current">1</a><a href="javascript:;">2</a><a
                            href="javascript:;">3</a><span
                                class="text">…</span><a href="javascript:;">24</a><a
                                    href="javascript:;" class="next">下一页<b></b></a>
                </div>*@
            <!--pagin end-->
        </div>
    </div>
</body>
</html>
